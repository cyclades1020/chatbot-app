# å®¢æœèŠå¤©æ©Ÿå™¨äºº APP

ä¸€å€‹å¯é‘²åµŒåˆ°ç¶²ç«™çš„å®¢æœèŠå¤©æ©Ÿå™¨äººï¼Œæ”¯æ´ Gemini AI èˆ‡ RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰åŠŸèƒ½ï¼Œåš´æ ¼é™åˆ¶å›ç­”åªèƒ½å¾æä¾›çš„æ–‡æœ¬å…§å®¹ä¸­æ“·å–ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ¤– **Gemini AI æ•´åˆ**ï¼šä½¿ç”¨ Google Gemini é€²è¡Œè‡ªç„¶èªè¨€è™•ç†
- ğŸ“š **RAG åŠŸèƒ½**ï¼šæª¢ç´¢å¢å¼·ç”Ÿæˆï¼Œç¢ºä¿å›ç­”åŸºæ–¼æä¾›çš„æ–‡æœ¬å…§å®¹
- ğŸ“ **æ–‡æœ¬ç®¡ç†**ï¼šæ”¯æ´æª”æ¡ˆä¸Šå‚³æˆ–ç›´æ¥è¼¸å…¥æ–‡æœ¬ä½œç‚ºçŸ¥è­˜åº«
- ğŸ¨ **å¯é‘²åµŒè¨­è¨ˆ**ï¼šå‰ç«¯å¯æ‰“åŒ…æˆ widgetï¼Œè¼•é¬†åµŒå…¥ä»»ä½•ç¶²ç«™
- ğŸ”’ **åš´æ ¼é™åˆ¶**ï¼šå›ç­”åƒ…åŸºæ–¼çŸ¥è­˜åº«å…§å®¹ï¼Œä¸æœƒç·¨é€ è³‡è¨Š

## å°ˆæ¡ˆçµæ§‹

```
CURSER_APP/
â”œâ”€â”€ backend/          # å¾Œç«¯ API æœå‹™
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js          # Express ä¼ºæœå™¨
â”‚   â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯ï¼ˆGeminiã€RAGï¼‰
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â””â”€â”€ data/                  # çŸ¥è­˜åº«è³‡æ–™å„²å­˜
â”œâ”€â”€ frontend/        # å‰ç«¯ React æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx            # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatWidget.jsx     # èŠå¤©ä»‹é¢
â”‚   â”‚   â”œâ”€â”€ TextUploader.jsx   # æ–‡æœ¬ä¸Šå‚³ä»‹é¢
â”‚   â”‚   â””â”€â”€ widget.js          # Widget å…¥å£
â”‚   â””â”€â”€ index.html             # æ¸¬è©¦é é¢
â””â”€â”€ README.md
```

## å®‰è£èˆ‡è¨­å®š

### 1. å®‰è£ä¾è³´

```bash
# å®‰è£æ‰€æœ‰ä¾è³´ï¼ˆæ ¹ç›®éŒ„ã€å¾Œç«¯ã€å‰ç«¯ï¼‰
npm run install:all
```

æˆ–åˆ†åˆ¥å®‰è£ï¼š

```bash
# å¾Œç«¯
cd backend
npm install

# å‰ç«¯
cd frontend
npm install
```

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

è¤‡è£½å¾Œç«¯çš„ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆï¼š

```bash
cp backend/.env.example backend/.env
```

ç·¨è¼¯ `backend/.env`ï¼Œå¡«å…¥æ‚¨çš„ Gemini API Keyï¼š

```env
GEMINI_API_KEY=your_gemini_api_key_here
PORT=3001
NODE_ENV=development
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
```

### 3. å–å¾— Gemini API Key

1. å‰å¾€ [Google AI Studio](https://makersuite.google.com/app/apikey)
2. å»ºç«‹æ–°çš„ API Key
3. å°‡ API Key å¡«å…¥ `.env` æª”æ¡ˆ

## åŸ·è¡Œæ–¹å¼

### é–‹ç™¼æ¨¡å¼

**çµ‚ç«¯æ©Ÿ 1 - å•Ÿå‹•å¾Œç«¯ï¼š**
```bash
npm run dev:backend
# æˆ–
cd backend
npm run dev
```

**çµ‚ç«¯æ©Ÿ 2 - å•Ÿå‹•å‰ç«¯ï¼š**
```bash
npm run dev:frontend
# æˆ–
cd frontend
npm start
```

- å¾Œç«¯æœå‹™ï¼šhttp://localhost:3001
- å‰ç«¯æ‡‰ç”¨ï¼šhttp://localhost:5173

### ç”Ÿç”¢æ¨¡å¼

**å»ºç½®å‰ç«¯ï¼š**
```bash
npm run build:frontend
# æˆ–
cd frontend
npm run build
```

**å•Ÿå‹•å¾Œç«¯ï¼š**
```bash
cd backend
npm start
```

## ä½¿ç”¨æ–¹å¼

### 1. ä¸Šå‚³çŸ¥è­˜åº«æ–‡æœ¬

æœ‰å…©ç¨®æ–¹å¼å¯ä»¥ä¸Šå‚³æ–‡æœ¬ï¼š

**æ–¹å¼ä¸€ï¼šä¸Šå‚³æª”æ¡ˆ**
- é»æ“Šã€Œé¡¯ç¤ºæ–‡æœ¬ä¸Šå‚³ä»‹é¢ã€
- é¸æ“‡ `.txt` æª”æ¡ˆä¸Šå‚³

**æ–¹å¼äºŒï¼šç›´æ¥è¼¸å…¥**
- åœ¨æ–‡æœ¬è¼¸å…¥æ¡†ä¸­è²¼ä¸Šæˆ–è¼¸å…¥å…§å®¹
- é»æ“Šã€Œä¸Šå‚³æ–‡æœ¬ã€

### 2. é–‹å§‹èŠå¤©

- åœ¨èŠå¤©ä»‹é¢è¼¸å…¥å•é¡Œ
- ç³»çµ±æœƒå¾çŸ¥è­˜åº«ä¸­æª¢ç´¢ç›¸é—œå…§å®¹
- ä½¿ç”¨ Gemini AI ç”ŸæˆåŸºæ–¼æ–‡æœ¬å…§å®¹çš„å›ç­”

### 3. é‘²åµŒåˆ°ç¶²ç«™

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨å»ºç½®å¾Œçš„ Widget**

1. å»ºç½®å‰ç«¯ï¼š
```bash
cd frontend
npm run build
```

2. åœ¨æ‚¨çš„ HTML é é¢ä¸­åŠ å…¥ï¼š
```html
<div id="chatbot-widget"></div>
<script src="path/to/chatbot-widget.js"></script>
<script>
  window.initChatbotWidget('chatbot-widget', {
    apiUrl: 'http://your-backend-url:3001'
  });
</script>
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ iframe**

```html
<iframe 
  src="http://your-frontend-url:5173" 
  width="400" 
  height="600"
  frameborder="0">
</iframe>
```

## API ç«¯é»

### `POST /api/chat`
ç™¼é€èŠå¤©è¨Šæ¯

**è«‹æ±‚ï¼š**
```json
{
  "message": "æ‚¨çš„å•é¡Œ"
}
```

**å›æ‡‰ï¼š**
```json
{
  "success": true,
  "answer": "AI ç”Ÿæˆçš„å›ç­”",
  "sources": [
    {
      "index": 0,
      "text": "ç›¸é—œæ–‡æœ¬ç‰‡æ®µ...",
      "score": 5
    }
  ]
}
```

### `POST /api/upload/text`
ä¸Šå‚³æ–‡æœ¬å…§å®¹

**è«‹æ±‚ï¼š**
```
Content-Type: text/plain

æ‚¨çš„æ–‡æœ¬å…§å®¹...
```

**å›æ‡‰ï¼š**
```json
{
  "success": true,
  "message": "æ–‡æœ¬å…§å®¹ä¸Šå‚³æˆåŠŸ",
  "chunksCount": 10,
  "textLength": 5000
}
```

### `POST /api/upload/file`
ä¸Šå‚³æ–‡æœ¬æª”æ¡ˆ

**è«‹æ±‚ï¼š**
```
Content-Type: multipart/form-data
file: [æª”æ¡ˆ]
```

### `GET /api/status`
ç²å–æœå‹™ç‹€æ…‹

**å›æ‡‰ï¼š**
```json
{
  "success": true,
  "knowledgeBase": {
    "hasContent": true,
    "textLength": 5000,
    "chunksCount": 10
  },
  "gemini": {
    "connected": true,
    "configured": true
  }
}
```

## æŠ€è¡“æ¶æ§‹

- **å¾Œç«¯**ï¼šNode.js + Express
- **å‰ç«¯**ï¼šReact + Vite
- **AI æ¨¡å‹**ï¼šGoogle Gemini Pro
- **æ–‡æœ¬è™•ç†**ï¼šè‡ªè¨‚ RAG å¯¦ä½œï¼ˆæ–‡æœ¬åˆ†å¡Š + é—œéµå­—åŒ¹é…ï¼‰

## RAG é‹ä½œåŸç†

1. **æ–‡æœ¬åˆ†å¡Š**ï¼šå°‡ä¸Šå‚³çš„æ–‡æœ¬åˆ†å‰²æˆè¼ƒå°çš„å€å¡Šï¼ˆé è¨­ 1000 å­—å…ƒï¼‰
2. **æª¢ç´¢**ï¼šæ ¹æ“šä½¿ç”¨è€…å•é¡Œï¼Œä½¿ç”¨é—œéµå­—åŒ¹é…æ‰¾å‡ºæœ€ç›¸é—œçš„æ–‡æœ¬å€å¡Š
3. **ç”Ÿæˆ**ï¼šå°‡ç›¸é—œå€å¡Šä½œç‚ºä¸Šä¸‹æ–‡ï¼Œä½¿ç”¨ Gemini ç”Ÿæˆå›ç­”
4. **é™åˆ¶**ï¼šæç¤ºè©æ˜ç¢ºè¦æ±‚åªåŸºæ–¼æä¾›çš„æ–‡æœ¬å›ç­”ï¼Œä¸ç·¨é€ è³‡è¨Š

## æ³¨æ„äº‹é …

- âš ï¸ ç¢ºä¿å¾Œç«¯æœå‹™æ­£å¸¸é‹è¡Œï¼Œå‰ç«¯æ‰èƒ½æ­£å¸¸é‹ä½œ
- âš ï¸ è«‹å¦¥å–„ä¿ç®¡ Gemini API Keyï¼Œä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ æ–‡æœ¬ä¸Šå‚³æœ‰ 10MB çš„å¤§å°é™åˆ¶
- âš ï¸ ç›®å‰ä½¿ç”¨ç°¡å–®çš„é—œéµå­—åŒ¹é…é€²è¡Œæª¢ç´¢ï¼Œå¤§å‹çŸ¥è­˜åº«å»ºè­°ä½¿ç”¨å‘é‡è³‡æ–™åº«

## æˆæ¬Š

MIT License

